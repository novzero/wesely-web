<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>wesely</title>
	<script src="https://kit.fontawesome.com/a9ad5c8c5b.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="/css/font.css" />
	<link rel="stylesheet" href="/css/header.css" />
	<link rel="stylesheet" href="/css/business/createStore.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


	<!-- Scripts -->
	<script>
		function checkInput(input) {
			if (input.val().trim() === '') {  // ì…ë ¥ê°’ì´ ì—†ì„ ê²½ìš°
				input.removeClass('off');
				input.addClass('on');

				return false;

			} else {  // ê·¸ë ‡ì§€ ì•Šìœ¼ë©´
				input.removeClass('on');
				input.addClass('off');  // ê²½ê³  ë³´ë” ìˆ¨ê¸°ê¸°
				return true;
			}
		}

		function formCheck() {
			let isValid = true;
			// ì…ë ¥ í•„ë“œ ê°’ ë³€ê²½ ì‹œ
			$('.requiredData').change(function () {
				checkInput($(this));
			});
			// ëª¨ë“  ì…ë ¥ í•„ë“œì— ëŒ€í•˜ì—¬
			$('.requiredData').each(function () {
				if (!checkInput($(this))) {  // ë§Œì•½ í˜„ì¬ ì…ë ¥ í•„ë“œì˜ ê°’ì´ ë¹„ì–´ìˆë‹¤ë©´
					isValid = false;  // ì „ì²´ í¼ì˜ ìœ íš¨ì„±ì„ 'ë¬´íš¨'ë¡œ ì„¤ì •
				}
			});

			let value = $("#storeImges1").val();
			if (value == null || value.trim().length == 0) { // ì²«ë²ˆì§¸ ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´
				alert('ì²«ë²ˆì§¸ ì´ë¯¸ì§€ëŠ” í•„ìˆ˜ë“±ë¡ì…ë‹ˆë‹¤. ì¸ë„¤ì¼ë¡œ ë“¤ì–´ê°ˆ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.'); // ê²½ê³ 
				$(".label").removeClass('off');
				$(".label").addClass('on');
				return false;   // ì „ì†¡ ì·¨ì†Œ
			}else if(value !== null){
				$(".label").removeClass('on');
				$(".label").addClass('off');
			}
			if (!isValid) {  // ë§Œì•½ ì „ì²´ í¼ì˜ ìœ íš¨ì„±ì´ 'ë¬´íš¨'ë¼ë©´
				alert('í•„ìˆ˜ì…ë ¥ë€ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');  // ê²½ê³  ë©”ì‹œì§€ ì¶œë ¥
				return false;  // í¼ ì œì¶œ ì·¨ì†Œ
			}

			return true;
		}

		function updateRegion() {
			// ë§¤ì¥ ì£¼ì†Œ ì…ë ¥ í•„ë“œì—ì„œ ê°’ ê°€ì ¸ì˜¤ê¸°
			var address = document.getElementById('address').value;

			// ì£¼ì†Œ ë¶„ë¦¬
			var addressParts = address.split(' ');

			// ì‹œì„¤ ìœ„ì¹˜ ì…ë ¥ í•„ë“œì— ê°’ ì„¤ì •
			document.getElementById('region').value = addressParts[1] + ' ' + addressParts[2];
		}
	</script>
</head>

<body>
	<div class="wrapper">
		<header>
			<div class="logo">
				<a href="/">
					<img src="/images/weLogo.png" alt="Logo" />
				</a>
			</div>
			<nav class="bar">
				<a href="/store/"><strong>ìš´ë™ì‹œì„¤ê²€ìƒ‰</strong></a>
				<a href="/community/"><strong>ì»¤ë®¤ë‹ˆí‹°</strong></a>
				<a href="/"><strong>ê³ ê°ì„¼í„°</strong></a>
			</nav>
			<nav class="login">
				<th:block th:if="${session.mvo == null}">
					<a href="/member/login"><strong>ë¡œê·¸ì¸</strong></a>
					<a href="/member/join"><strong>íšŒì›ê°€ì…</strong></a>
				</th:block>

				<th:block th:if="${session.mvo != null && session.mvo.authority == 'ì¼ë°˜ê³„ì •'}">
					<a href="/member/updateProfile"><strong>ë§ˆì´í˜ì´ì§€</strong></a>
					<a href="/member/logout"><strong>ë¡œê·¸ì•„ì›ƒ</strong></a>
				</th:block>

				<th:block th:if="${session.mvo != null && session.mvo.authority == 'ë¹„ì¦ˆë‹ˆìŠ¤ê³„ì •'}">
					<a href="/member/updateProfile"><strong>íšŒì›ì •ë³´ìˆ˜ì •</strong></a>
					<a th:href="@{/store/view/b/{userId}(userId=${session.mvo.userid})}"><strong>ë§¤ì¥ê´€ë¦¬</strong></a>
					<a href="/member/logout"><strong>ë¡œê·¸ì•„ì›ƒ</strong></a>
				</th:block>
			</nav>
		</header>

		<!-- ğŸ‘‡ì—¬ê¸°ë¶€í„° ì‹œì„¤ìƒì„¸í˜ì´ì§€ -->
		<main>
			<form action="/business/insertOk" onsubmit="return formCheck()" method="post" enctype="multipart/form-data">
				<div class="fileWrapper">
					<p class="titleText required">ë§¤ì¥ ì‚¬ì§„<span class="subText"> ì²«ë²ˆì§¸ëŠ” í•„ìˆ˜ë“±ë¡ì´ë©°, ì¸ë„¤ì¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.</span></p>
					<label for="storeImges1" class="label off">
						<input id="storeImges1" type="file" name="uploadFile" />
						<input type="hidden" name="iorder" value='1' />
					</label>

					<label for="storeImges2" class="off">
						<input class="storeImage" id="storeImges2" type="file" name="uploadFile" />
						<input type="hidden" name="iorder" value='2' />
					</label>

					<label for="storeImges3" class="off">
						<input class="storeImage" id="storeImges3" type="file" name="uploadFile" />
						<input type="hidden" name="iorder" value='3' />
					</label>

					<label for="storeImges4" class="off">
						<input class="storeImage" id="storeImges4" type="file" name="uploadFile" />
						<input type="hidden" name="iorder" value='4' />
					</label>
				</div>

				<!-- ìœ ì € ì•„ì´ë”” -->
				<input id="userid" th:unless="${session.mvo.nickname == null}" th:value="${session.mvo.userid}"
					type="hidden" name="userid" />
				<!-- ì¹´ì¹´ì˜¤ ì•„ì´ë”” : ë¹„ì›Œë‘ê¸° -->
				<input class="addText" id="kakaoId" type="hidden" name="kakaoId" value="">
				<!-- ì‹œì„¤ ìœ„ì¹˜ ë‹´ê¸° -->
				<input class="addText" id="region" type="hidden" name="region" value="">

				<p class="titleText required">ë§¤ì¥ ì´ë¦„<span class="wranText">(í•„ìˆ˜)</span></p>
				<input class="requiredData addText off" id="name" type="text" placeholder="ë§¤ì¥ì´ë¦„" name="name">

				<p class="titleText required">ë§¤ì¥ ì£¼ì†Œ<span class="wranText">(í•„ìˆ˜)</span></p>
				<input class="requiredData addText off" id="address" type="text" placeholder="ë§¤ì¥ì£¼ì†Œ" name="address"
					onchange="updateRegion()">

				<p class="titleText required">í•´ì‰¬íƒœê·¸<span class="wranText">(í•„ìˆ˜)</span></p>
				<input class="requiredData addText off" id="hashTag" type="text" placeholder="í•´ì‰¬íƒœê·¸" name="hashTag">

				<p class="titleText">ë§¤ì¥ ìš´ì˜ì‹œê°„</p>
				<input class="addText off" id="opening" type="text" placeholder="ë§¤ì¥ìš´ì˜ì‹œê°„" name="opening">

				<p class="titleText required">ë§¤ì¥ ì „í™”ë²ˆí˜¸<span class="wranText">(í•„ìˆ˜)</span></p>
				<input class="requiredData addText off" id="tel" type="text" placeholder="ë§¤ì¥ì „í™”ë²ˆí˜¸" name="tel">

				<p class="titleText">ë§¤ì¥ ì†Œê°œ</p>
				<input class="addText off" id="dec" type="text" placeholder="ë§¤ì¥ì„¤ëª…" name="description">

				<div class="modalBtn">
					<input class="btnCancle" type="button" value="ì·¨ì†Œ"
						th:onclick="location.href='/store/view/b/'+[[${session.mvo.userid}]]"></input>
					<input class="btnAdd" type="submit" value="ë“±ë¡" onclick="return formCheck()"></input>
				</div>
			</form>
		</main>
</body>

</html>